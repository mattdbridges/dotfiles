#!/usr/bin/env zsh
# vim: filetype=zsh

set -e

# Ask for the administrator password upfront
sudo -v

source ${0:a:h}/helpers

# Keep-alive: update existing `sudo` time stamp until `install` has finished
keepSudoAlive() {
  while true; do sudo -n true; sleep 30; kill -0 "$$" || exit; done 2>/dev/null &
}

main() {
  keepSudoAlive

  installHomebrew
  installEssentialBrews
  installVagrantPlugins
  installPhpbrew
  installZprezto
  installTpm

  cloneRepo

  # . $HOME/.dotfiles/exe/deps
  # . $HOME/.dotfiles/exe/setup
  # . $HOME/.dotfiles/exe/macos

  echo
  logSuccess "Finished installing"
}

main $ARGS
